$(document).ready(function(){function e(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("body").addClass("dark-mode"):$("body").removeClass("dark-mode")}e(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),$.get("https://peps.ulaval.ca/activite/bains-libres",function(e){try{var i=(new DOMParser).parseFromString(e,"text/html").querySelector("div.accordion.schedule");if(i){var a=i.querySelectorAll("div.panel");if(0===a.length)$("#loading").text("Aucun horaire trouvAc.");else{let t=$("#schedule");t.empty(),a.forEach((e,i)=>{var a;6<=i||($(e).find("svg").remove(),i=$(e).find(".btn-panel").text().trim(),$(e).find(".btn-panel").remove(),$(e).find(".activite-post-it").each(function(){$(this).find("p").first().prepend('<i class="fa-solid fa-note-sticky icon-small"></i> ')}),$(e).find("h5").replaceWith(function(){let e="";var i=$(this).text().trim().toLowerCase();switch(!0){case i.includes("heure"):e='<i class="fa-solid fa-clock icon-small"></i>';break;case i.includes("informations"):e='<i class="fa-solid fa-circle-info icon-small"></i>';break;case i.includes("configuration"):e='<i class="fa-solid fa-water icon-small"></i>'}return`<h3>${e} ${$(this).text().trim()}</h3>`}),$(e).find(".activite-schedule-row").each(function(){$(this).is(":last-child")||$(this).after('<hr class="thin-divider">')}),a=i.toLowerCase().startsWith("samedi")||i.toLowerCase().startsWith("dimanche"),a=$(`<div class="col">
              <div class="card h-100 ${a?"weekend-card":""}">
                <div class="card-header">
                  <h2 class='card-title'>${i}</h2>
                </div>
                <div class="card-body">
                  <div class="card-text mt-2">
                    ${e.innerHTML}
                  </div>
                </div>
              </div>
            </div>`),t.append(a))}),$("#loading").hide();try{window.dispatchEvent(new CustomEvent("schedule:ready"))}catch(e){}}}else $("#loading").text("Impossible de trouver les horaires.")}catch(e){console.error("Erreur lors de l'analyse des horaires :",e),$("#loading").text("Une erreur est survenue.")}})});